#!/bin/bash
export LANG=en_US.UTF-8


mail="admin#itnihao.com"
svn_path="/var/svn/webdata/"
path=$(svnlook  dirs-changed ${svn_path})
author=$(svnlook info ${svn_path}|awk NR=="1")
changedate=$(svnlook info ${svn_path}|awk NR=="2")
svn_version=$(svnlook info ${svn_path}|awk NR=="3")
message=$(svnlook info ${svn_path}|awk NR=="4")
for mail_list in ${mail}
do
    echo -e "svn�汾:${svn_version}\n����:${author}\n����ʱ��:${changedate}\n������Ϣ:${message}\n�ļ�����Ŀ¼:${path}" | mail -s "svn update version ${svn_version}" ${mail_list}
done


for dir in $(svnlook dirs-changed /var/svn/webdata/)
do
    svn update -N /opt/web/data/$dir --username "admin" --password "admin"
done
